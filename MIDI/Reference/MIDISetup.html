<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN
	"http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html lang="en">
<head>
	<META http-equiv="content-type" CONTENT="text/html;charset=iso-8859-1">
	<title>?Reference/MIDISetup?</title>
</head>

<body bgcolor="#FFFFFF">
<a name="CoreMIDI/MIDISetup.h"></a>
<h1>CoreMIDI / MIDISetup.h</h1><p>
	This header defines functions that manipulate and customize the global
	state of the MIDI system.  These functions are generally only needed by 
	applications which wish to allow the user some flexibility in how
	the MIDI system's state is presented, and by MIDI drivers, which may
	dynamically modify the system state as hardware is connected and 
	disconnected.
</p>
<hr>

	<table border="0" cellpadding="0" cellspacing="4">
<tr><td colspan="3"><b>Functions</b></td></tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupCreate">MIDISetupCreate</a></td>
<td>
		Interrogates drivers, to discover what hardware is present.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupDispose">MIDISetupDispose</a></td>
<td>
		Dispose a MIDISetup object.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupInstall">MIDISetupInstall</a></td>
<td>
		Install a MIDISetup as the system's current state.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupGetCurrent">MIDISetupGetCurrent</a></td>
<td>
		Return the system's current MIDISetup.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupToData">MIDISetupToData</a></td>
<td>
		Create an XML representation of a MIDISetup object.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupFromData">MIDISetupFromData</a></td>
<td>
		Create a MIDISetup object from an XML stream.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDIDeviceAddEntity">MIDIDeviceAddEntity</a></td>
<td>
		Add an entity to a device.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDIDeviceRemoveEntity">MIDIDeviceRemoveEntity</a></td>
<td>
		Remove an entity from a device.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDIEntityAddOrRemoveEndpoints">MIDIEntityAddOrRemoveEndpoints</a></td>
<td>
		Add or remove endpoints from an entity.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupAddDevice">MIDISetupAddDevice</a></td>
<td>
		Adds a driver-owner MIDI device to the current MIDISetup
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupRemoveDevice">MIDISetupRemoveDevice</a></td>
<td>
		Removes a driver-owned MIDI device from the current MIDISetup
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupAddExternalDevice">MIDISetupAddExternalDevice</a></td>
<td>
		Adds an external MIDI device to the current MIDISetup
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupRemoveExternalDevice">MIDISetupRemoveExternalDevice</a></td>
<td>
		Removes an external MIDI device from the current MIDISetup
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDIGetSerialPortOwner">MIDIGetSerialPortOwner</a></td>
<td>
		Returns the MIDI driver that owns a serial port.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetSerialPortOwner">MIDISetSerialPortOwner</a></td>
<td>
		Specifies the MIDI driver that owns a serial port.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDIGetSerialPortDrivers">MIDIGetSerialPortDrivers</a></td>
<td>
		Returns a list of installed MIDI drivers for serial port
					MIDI devices.
	</td>
</tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDIExternalDeviceCreate">MIDIExternalDeviceCreate</a></td>
<td>
		Create a new external MIDI device.
	</td>
</tr>
<tr><td colspan="3"><b>Defined Types</b></td></tr>
<tr valign="top"><td width="32">&nbsp;</td><td><a href="../Reference/MIDISetup.html#MIDISetupRef">MIDISetupRef</a></td></tr>
</table>


<hr>

<a name="//apple_ref/c/tdef/MIDISetupRef"></a>
<h3><a name="MIDISetupRef">MIDISetupRef</a></h3>

		<pre>typedef struct OpaqueMIDISetup *<b>MIDISetupRef</b>;</pre>
	
		<p>Derives from <a href="../Reference/MIDIServices.html#MIDIObjectRef"><tt>MIDIObjectRef</tt></a>, does not have an owner object.</p>

		<p>This represents the global state of the MIDI system, containing lists
		of the MIDI devices and serial port owners.</p>

		<p>Generally, only MIDI drivers and specialized configuration editors will
		need to manipulate MIDISetup objects, not the average MIDI client
		application.  As of CoreMIDI 1.1, the MIDIServer maintains a single
		global <tt>MIDISetupRef</tt>, stored persistently in a preference file.</p>
	<hr>

<a name="//apple_ref/c/func/MIDISetupCreate"></a>
<h3><a name="MIDISetupCreate">MIDISetupCreate</a></h3>

		Interrogates drivers, to discover what hardware is present.
	
		<pre>OSStatus <b>MIDISetupCreate</b>(
  <a href="../Reference/MIDISetup.html#MIDISetupRef">MIDISetupRef</a> *  outSetup
);</pre>
	
		As of CoreMIDI 1.1, it is usually not necessary to call this function,
		as CoreMIDI manages a single persistent MIDISetup itself.
	<h4>Parameters</h4>
<dl><dt><tt>outSetup</tt></dt>
<dd>
						On successful return, points to a newly-created MIDISetup
						object.  The caller is responsible for disposing it,
						or transferring ownership of the object back to the
						system, with <a href="../Reference/MIDISetup.html#MIDISetupInstall"><tt>MIDISetupInstall</tt></a>.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDISetupDispose"></a>
<h3><a name="MIDISetupDispose">MIDISetupDispose</a></h3>

		Dispose a MIDISetup object.
	
		<pre>OSStatus <b>MIDISetupDispose</b>(
  <a href="../Reference/MIDISetup.html#MIDISetupRef">MIDISetupRef</a>  setup
);</pre>
	
					As of CoreMIDI 1.1, it is usually not necessary to call
					this function, as CoreMIDI manages a single persistent
					MIDISetup itself.
	<h4>Parameters</h4>
<dl><dt><tt>setup</tt></dt>
<dd>
						The MIDISetup to be disposed.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDISetupInstall"></a>
<h3><a name="MIDISetupInstall">MIDISetupInstall</a></h3>

		Install a MIDISetup as the system's current state.
	
		<pre>OSStatus <b>MIDISetupInstall</b>(
  <a href="../Reference/MIDISetup.html#MIDISetupRef">MIDISetupRef</a>  setup
);</pre>
	
		<p>A client can create a MIDISetup object using
		<a href="../Reference/MIDISetup.html#MIDISetupCreate"><tt>MIDISetupCreate</tt></a>, or <a href="../Reference/MIDISetup.html#MIDISetupFromData"><tt>MIDISetupFromData</tt></a>.  This function will
		install this state as the current state of the system,
		possibly changing the devices visible to clients.</p>

		<p>As of CoreMIDI 1.1, it is usually not necessary to call
		this function, as CoreMIDI manages a single persistent
		MIDISetup itself.</p>
	<h4>Parameters</h4>
<dl><dt><tt>setup</tt></dt>
<dd>
						The MIDISetup object to install.  Ownership of this
						object is transferred from the client to the system; the
						client must <b>not</b> dispose of this MIDISetup.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDISetupGetCurrent"></a>
<h3><a name="MIDISetupGetCurrent">MIDISetupGetCurrent</a></h3>

		Return the system's current MIDISetup.
	
		<pre>OSStatus <b>MIDISetupGetCurrent</b>(
  <a href="../Reference/MIDISetup.html#MIDISetupRef">MIDISetupRef</a> *  outSetup
);</pre>
	
		As of CoreMIDI 1.1, it is usually not necessary to call
		this function, as CoreMIDI manages a single persistent
		MIDISetup itself.
	<h4>Parameters</h4>
<dl><dt><tt>outSetup</tt></dt>
<dd>
						On successful return, points to the system's most
						recently installed MIDISetup.  The system retains
						ownership of the object; the client must <b>not</b>
						dispose of this MIDISetup.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDISetupToData"></a>
<h3><a name="MIDISetupToData">MIDISetupToData</a></h3>

		Create an XML representation of a MIDISetup object.
	
		<pre>OSStatus <b>MIDISetupToData</b>(
  <a href="../Reference/MIDISetup.html#MIDISetupRef">MIDISetupRef</a>  setup,
  CFDataRef *   outData
);</pre>
	
		As of CoreMIDI 1.1, it is usually not necessary to call
		this function, as CoreMIDI manages a single persistent
		MIDISetup itself.
	<h4>Parameters</h4>
<dl><dt><tt>setup</tt></dt>
<dd>
						The MIDISetup object whose XML representation is to be
						returned.
		</dd>
<dt><tt>outData</tt></dt>
<dd>
						On successful return, points to a newly-created CFDataRef
						containing the XML text.  The client is responsible for
						releasing this CFData object when done with it.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDISetupFromData"></a>
<h3><a name="MIDISetupFromData">MIDISetupFromData</a></h3>

		Create a MIDISetup object from an XML stream.
	
		<pre>OSStatus <b>MIDISetupFromData</b>(
  CFDataRef       data,
  <a href="../Reference/MIDISetup.html#MIDISetupRef">MIDISetupRef</a> *  outSetup
);</pre>
	
		As of CoreMIDI 1.1, it is usually not necessary to call
		this function, as CoreMIDI manages a single persistent
		MIDISetup itself.
	<h4>Parameters</h4>
<dl><dt><tt>data</tt></dt>
<dd>
						The XML text from which a MIDISetup object is to be built.
		</dd>
<dt><tt>outSetup</tt></dt>
<dd>
						On successful return, points to a newly-created MIDISetup
						object.  The caller is responsible for disposing it, or
						transferring ownership of the object back to the system,
						with <a href="../Reference/MIDISetup.html#MIDISetupInstall"><tt>MIDISetupInstall</tt></a>.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDIDeviceAddEntity"></a>
<h3><a name="MIDIDeviceAddEntity">MIDIDeviceAddEntity</a></h3>

		Add an entity to a device.
	
		<pre>OSStatus <b>MIDIDeviceAddEntity</b>(
  <a href="../Reference/MIDIServices.html#MIDIDeviceRef">MIDIDeviceRef</a>    device,
  CFStringRef      name,
  Boolean          embedded,
  ItemCount        numSourceEndpoints,
  ItemCount        numDestinationEndpoints,
  <a href="../Reference/MIDIServices.html#MIDIEntityRef">MIDIEntityRef</a> *  newEntity
);</pre>
	
		<p>Drivers call this function to specify one of the entities that comprise
		a device.</p>

		<p>Non-drivers may call this function as of CoreMIDI 1.1, to add entities
		to external devices.</p>
	<h4>Parameters</h4>
<dl><dt><tt>device</tt></dt>
<dd>
						The device to which an entity is to be added.
		</dd>
<dt><tt>name</tt></dt>
<dd>
						The name of the new entity.
		</dd>
<dt><tt>embedded</tt></dt>
<dd>
						True if this entity is inside the device, false if the
						entity simply consists of external connectors to which
						other devices can be attached.
		</dd>
<dt><tt>numSourceEndpoints</tt></dt>
<dd>
						The number of source endpoints the entity has.
		</dd>
<dt><tt>numDestinationEndpoints</tt></dt>
<dd>
						The number of destination endpoints the entity has.
		</dd>
<dt><tt>newEntity</tt></dt>
<dd>
						On successful return, points to the newly-created entity.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDIDeviceRemoveEntity"></a>
<h3><a name="MIDIDeviceRemoveEntity">MIDIDeviceRemoveEntity</a></h3>

		Remove an entity from a device.
	
		<pre>OSStatus <b>MIDIDeviceRemoveEntity</b>(
  <a href="../Reference/MIDIServices.html#MIDIDeviceRef">MIDIDeviceRef</a>  device,
  <a href="../Reference/MIDIServices.html#MIDIEntityRef">MIDIEntityRef</a>  entity
);</pre>
	
		<p>Drivers may call this function to remove one of a device's entities.</p>

		<p>New for CoreMIDI 1.1.</p>
	<h4>Parameters</h4>
<dl><dt><tt>device</tt></dt>
<dd>
						The device from which an entity is to be removed.
		</dd>
<dt><tt>entity</tt></dt>
<dd>
						The entity to be removed.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDIEntityAddOrRemoveEndpoints"></a>
<h3><a name="MIDIEntityAddOrRemoveEndpoints">MIDIEntityAddOrRemoveEndpoints</a></h3>

		Add or remove endpoints from an entity.
	
		<pre>OSStatus <b>MIDIEntityAddOrRemoveEndpoints</b>(
  <a href="../Reference/MIDIServices.html#MIDIEntityRef">MIDIEntityRef</a>  entity,
  ItemCount      numSourceEndpoints,
  ItemCount      numDestinationEndpoints
);</pre>
	
		<p>Drivers may call this function to add to or remove an entity's
		endpoints.</p>

		<p>New for CoreMIDI 1.3.</p>
	<h4>Parameters</h4>
<dl><dt><tt>device</tt></dt>
<dd>
						The device from which an entity is to be removed.
		</dd>
<dt><tt>entity</tt></dt>
<dd>
						The entity to be removed.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDISetupAddDevice"></a>
<h3><a name="MIDISetupAddDevice">MIDISetupAddDevice</a></h3>

		Adds a driver-owner MIDI device to the current MIDISetup
	
		<pre>OSStatus <b>MIDISetupAddDevice</b>(
  <a href="../Reference/MIDIServices.html#MIDIDeviceRef">MIDIDeviceRef</a>  device
);</pre>
	
		<p>Only MIDI drivers may make this call; it is in this header file only
		for consistency with <a href="../Reference/MIDISetup.html#MIDISetupRemoveDevice"><tt>MIDISetupRemoveDevice</tt></a>.</p>

		<p>New for CoreMIDI 1.1.</p>
	<h4>Parameters</h4>
<dl><dt><tt>device</tt></dt>
<dd>
						The device to be added.
		</dd>
</dl>
<hr>

<a name="//apple_ref/c/func/MIDISetupRemoveDevice"></a>
<h3><a name="MIDISetupRemoveDevice">MIDISetupRemoveDevice</a></h3>

		Removes a driver-owned MIDI device from the current MIDISetup
	
		<pre>OSStatus <b>MIDISetupRemoveDevice</b>(
  <a href="../Reference/MIDIServices.html#MIDIDeviceRef">MIDIDeviceRef</a>  device
);</pre>
	
		<p>Generally this should only be called from a studio configuration
		editor, to remove a device which is offline and which the user has
		specified as being permanently missing.</p>

		<p>Instead of removing devices from the setup, drivers should set the
		device's <a href="../Reference/MIDIServices.html#kMIDIPropertyOffline"><tt>kMIDIPropertyOffline</tt></a> to 1 so that if the device reappears
		later, none of its properties are lost.</p>

		<p>New for CoreMIDI 1.1.</p>
	<h4>Parameters</h4>
<dl><dt><tt>device</tt></dt>
<dd>
						The device to be added.
		</dd>
</dl>
<hr>

<a name="//apple_ref/c/func/MIDISetupAddExternalDevice"></a>
<h3><a name="MIDISetupAddExternalDevice">MIDISetupAddExternalDevice</a></h3>

		Adds an external MIDI device to the current MIDISetup
	
		<pre>OSStatus <b>MIDISetupAddExternalDevice</b>(
  <a href="../Reference/MIDIServices.html#MIDIDeviceRef">MIDIDeviceRef</a>  device
);</pre>
	
		Useful for a studio configuration editor.  New for CoreMIDI 1.1.
	<h4>Parameters</h4>
<dl><dt><tt>device</tt></dt>
<dd>
						The device to be added.
		</dd>
</dl>
<hr>

<a name="//apple_ref/c/func/MIDISetupRemoveExternalDevice"></a>
<h3><a name="MIDISetupRemoveExternalDevice">MIDISetupRemoveExternalDevice</a></h3>

		Removes an external MIDI device from the current MIDISetup
	
		<pre>OSStatus <b>MIDISetupRemoveExternalDevice</b>(
  <a href="../Reference/MIDIServices.html#MIDIDeviceRef">MIDIDeviceRef</a>  device
);</pre>
	
		Useful for a studio configuration editor.  New for CoreMIDI 1.1.
	<h4>Parameters</h4>
<dl><dt><tt>device</tt></dt>
<dd>
						The device to be removed.
		</dd>
</dl>
<hr>

<a name="//apple_ref/c/func/MIDIGetSerialPortOwner"></a>
<h3><a name="MIDIGetSerialPortOwner">MIDIGetSerialPortOwner</a></h3>

		Returns the MIDI driver that owns a serial port.
	
		<pre>OSStatus <b>MIDIGetSerialPortOwner</b>(
  CFStringRef    portName,
  CFStringRef *  outDriverName
);</pre>
	
		<p>The current MIDISetup tracks ownership of serial ports to one of the
		MIDI drivers installed in the system.</p>

		<p>Serial ports can be enumerated using <code>IOServiceMatching(kIOSerialBSDServiceValue)</code>.  The port's unique name is the IOService's
		<code>kIOTTYDeviceKey</code> property.</p>

		<p>New for CoreMIDI 1.1.</p>

		<p>A previous version of this documentation specified an incorrect key for
		obtaining the port's unique name (IOTTYBaseName).</p>
	<h4>Parameters</h4>
<dl><dt><tt>portName</tt></dt>
<dd>
						The name of a serial port.
		</dd>
<dt><tt>outDriverName</tt></dt>
<dd>
						On exit, the name of the driver owning the port,
						or NULL if no driver owns it.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDISetSerialPortOwner"></a>
<h3><a name="MIDISetSerialPortOwner">MIDISetSerialPortOwner</a></h3>

		Specifies the MIDI driver that owns a serial port.
	
		<pre>OSStatus <b>MIDISetSerialPortOwner</b>(
  CFStringRef  portName,
  CFStringRef  driverName
);</pre>
	
		<p>Use this to assign ownership of a serial port to one of the MIDI
		drivers installed in the system.</p>

		<p>New for CoreMIDI 1.1.</p>
	<h4>Parameters</h4>
<dl><dt><tt>portName</tt></dt>
<dd>
						The name of a serial port.
		</dd>
<dt><tt>driverName</tt></dt>
<dd>
						The name of the driver that owns the serial port,
						or NULL to specify that no driver owns it.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDIGetSerialPortDrivers"></a>
<h3><a name="MIDIGetSerialPortDrivers">MIDIGetSerialPortDrivers</a></h3>

		Returns a list of installed MIDI drivers for serial port
					MIDI devices.
	
		<pre>OSStatus <b>MIDIGetSerialPortDrivers</b>(
  CFArrayRef *  outDriverNames
);</pre>
	
		<p>Use this to determine which of the installed MIDI drivers are for
		devices which may attach to serial ports.</p>

		<p>New for CoreMIDI 1.1.</p>
	<h4>Parameters</h4>
<dl><dt><tt>outDriverNames</tt></dt>
<dd>
						On exit, a CFArrayRef containing a list of CFStringRef's
						which are the names of the serial port MIDI drivers.
						The array should be released by the caller.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

<a name="//apple_ref/c/func/MIDIExternalDeviceCreate"></a>
<h3><a name="MIDIExternalDeviceCreate">MIDIExternalDeviceCreate</a></h3>

		Create a new external MIDI device.
	
		<pre>OSStatus <b>MIDIExternalDeviceCreate</b>(
  CFStringRef      name,
  CFStringRef      manufacturer,
  CFStringRef      model,
  <a href="../Reference/MIDIServices.html#MIDIDeviceRef">MIDIDeviceRef</a> *  outDevice
);</pre>
	
		<p>Non-drivers may call this function as of CoreMIDI 1.1, to create
		external devices.</p>

		<p>The new device is not added to the current <a href="../Reference/MIDISetup.html#MIDISetupRef"><tt>MIDISetupRef</tt></a>; to do this,
		use <a href="../Reference/MIDISetup.html#MIDISetupAddExternalDevice"><tt>MIDISetupAddExternalDevice</tt></a>.</p>
	<h4>Parameters</h4>
<dl><dt><tt>name</tt></dt>
<dd>
						The name of the new device.
		</dd>
<dt><tt>manufacturer</tt></dt>
<dd>
						The name of the device's manufacturer.
		</dd>
<dt><tt>model</tt></dt>
<dd>
						The device's model name.
		</dd>
<dt><tt>outDevice</tt></dt>
<dd>
						On successful return, points to the newly-created device.
		</dd>
</dl>
<b>Result:</b> 
		An OSStatus result code.
	<hr>

</body>
</html>
